(this["webpackJsonppixel-puzzles"]=this["webpackJsonppixel-puzzles"]||[]).push([[0],{143:function(e,t,i){},171:function(e,t){},173:function(e,t){},293:function(e,t,i){},296:function(e,t,i){"use strict";i.r(t);var r=i(0),n=i.n(r),o=i(25),a=i.n(o),s=(i(143),i(18)),l=i.n(s),c=i(29),d=i(13),u=i(14),h=i(8),g=i(16),b=i(15),j=i(33),p=i(19),f=i.n(p),m=function(e){return e.flat().flat().flat().join("")},C=function(e){for(var t=[],i=0;i<e;i++)for(var r=0;r<e;r++)t.push({x:r,y:i});return function(e){var t,i,r=e.length;if(0===r)return e;for(;--r;)t=Math.floor(Math.random()*(r+1)),i=e[r],e[r]=e[t],e[t]=i;return e}(t)},v=function(e,t,i){var r="",n=e.bitmap,o=n.width,a=n.height,s=t*i;if(s!==o||s!==a)throw new Error("Invalid image size.");for(var l=0;l<t;l++)for(var c=0;c<t;c++)for(var d=0;d<i;d++)for(var u=0;u<i;u++){var h=c*i+u,g=l*i+d,b=f.a.intToRGBA(e.getPixelColor(h,g)),j=b.r,p=b.g,m=b.b,C=b.a;r+=j+p+m>=382.5||0===C?"0":"1"}return r},O=function(e,t,i){for(var r=m(e),n=e.length,o=e[0][0].length,a=n*o,s=new f.a(a,a),l=0,c=0;c<n;c++)for(var d=0;d<n;d++)for(var u=0;u<o;u++)for(var h=0;h<o;h++){var g=d*o+h,b=c*o+u,j=f.a.intToRGBA("1"===r[l]?t:i),p=j.r,C=j.g,v=j.b;s.setPixelColor(f.a.rgbaToInt(p,C,v,255),g,b),l++}return s},x=function(e){return"#".concat(e.toString(16).toUpperCase().padStart(6,"0"))},w=function(e){return"ABCDEFGHIJK"[e]},y=function(e){return e+1},S=function(e,t){return w(e)+y(t)},z=i(1),k=function(e){var t=600,i=n.a.useState({height:window.innerHeight,width:window.innerWidth}),r=Object(j.a)(i,2),o=r[0],a=r[1];n.a.useEffect((function(){var e=function(){var e=o.width;(e>t&&window.innerWidth<=t||e<=t&&window.innerWidth>t)&&a({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),function(t){window.removeEventListener("resize",e)}}));var s=e.onCellEdit,l=e.onCellChanged,c=e.isPrinting,d=e.gridSize,u=e.subGridSize,h=e.filledColor,g=e.emptyColor,b=e.gridY,p=e.gridX,f=e.subGridY,m=e.subGridX,C=e.isFilled,v=o.width>t?"".concat((c?50:40)/(d*u),"vw"):"6px";return Object(z.jsx)("td",{className:"cell",style:{backgroundColor:x(C?h:g),minWidth:v,minHeight:v,width:v,height:v},onPointerDown:function(){var t=e.isFilled;s&&s(t),l&&l(b,p,f,m,!t)},onMouseEnter:function(t){var i=e.isFilling;(l&&void 0===t.buttons?1===t.which:1===t.buttons)&&l(b,p,f,m,i)}})},G=function(e){Object(g.a)(i,e);var t=Object(b.a)(i);function i(e){var r;Object(d.a)(this,i),r=t.call(this);for(var n=e.isAuthoring,o=e.isCoordinate,a=e.isRevealing,s=e.subGridSize,l=e.initialSubGridData,c=[],u=[],g=0;g<s;g++){for(var b=[],j=[],p=0;p<s;p++)if(l){var f=l[g][p];b.push(f),n||o?j.push(f):j.push(0)}else b.push(0),j.push(0);c.push(b),u.push(j)}return r.state={subGridData:c,subGridFilling:u},a&&setTimeout((function(){r.setState({subGridFilling:c})}),1e3*Math.random()),r.onCellChanged=r.onCellChanged.bind(Object(h.a)(r)),r.isSolved=r.isSolved.bind(Object(h.a)(r)),r}return Object(u.a)(i,[{key:"onCellChanged",value:function(e,t,i,r,n){var o=this.props,a=o.onCellChanged,s=o.isAuthoring,l=o.isCoordinate,c=this.state,d=c.subGridData,u=c.subGridFilling;!l&&a&&(s&&(d[i][r]=n?1:0,u[i][r]=d[i][r],a(e,t,i,r,n)),u[i][r]=n?1:0),this.setState({subGridData:d,subGridFilling:u})}},{key:"isSolved",value:function(){var e=this.props,t=e.isAuthoring,i=e.isCoordinate,r=this.state,n=r.subGridData,o=r.subGridFilling;return!t&&!i&&JSON.stringify(n)===JSON.stringify(o)}},{key:"render",value:function(){var e=this,t=this.props,i=t.onCellEdit,r=t.isCoordinate,n=t.isFilling,o=t.isPrinting,a=t.gridSize,s=t.subGridSize,l=t.filledColor,c=t.emptyColor,d=t.solvedColor,u=t.unsolvedColor,h=t.gridY,g=t.gridX,b=this.state.subGridFilling;return Object(z.jsx)("td",{className:"subGrid",style:{border:"1px solid ".concat(x(this.isSolved()?d:u)),touchAction:r?"auto":"none"},children:Object(z.jsx)("table",{children:Object(z.jsx)("tbody",{children:b.map((function(t,r){return Object(z.jsx)("tr",{children:t.map((function(t,d){return Object(z.jsx)(k,{onCellEdit:i,onCellChanged:e.onCellChanged,isFilling:n,isPrinting:o,gridSize:a,subGridSize:s,filledColor:l,emptyColor:c,gridY:h,gridX:g,subGridY:r,subGridX:d,isFilled:t},d)}))},r)}))})})})}}]),i}(n.a.Component),I=function(e){var t=e.onCellEdit,i=e.onCellChanged,r=e.isAuthoring,n=e.isFilling,o=e.isRevealing,a=e.isPrinting,s=e.gridSize,l=e.subGridSize,c=e.filledColor,d=e.emptyColor,u=e.solvedColor,h=e.unsolvedColor,g=e.gridData;return Object(z.jsx)("table",{children:Object(z.jsxs)("tbody",{children:[Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{}),Array(s).fill().map((function(e,t){return Object(z.jsx)("td",{children:w(t)},t)}))]}),Array(s).fill().map((function(e,b){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:y(b)}),Array(s).fill().map((function(e,j){return Object(z.jsx)(G,{onCellEdit:t,onCellChanged:i,isAuthoring:r,isFilling:n,isRevealing:o,isPrinting:a,gridSize:s,subGridSize:l,filledColor:c,emptyColor:d,solvedColor:u,unsolvedColor:h,gridY:b,gridX:j,initialSubGridData:g[b][j]},j)}))]},b)}))]})})},D=i(129),A=i(302),R=i(21),E=i(63),F=i(54),P=i(128),L=i.n(P),M=(i(290),i(291),i(292),i(293),function(e){Object(g.a)(i,e);var t=Object(b.a)(i);function i(e){var r;return Object(d.a)(this,i),(r=t.call(this,e)).state={hasError:!1},r}return Object(u.a)(i,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0}),this.props.onError(e)}},{key:"render",value:function(){return this.state.hasError?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h1",{children:"Something went wrong."}),Object(z.jsx)(D.a,{variant:"primary",type:"submit",onClick:function(){return window.location.reload(!1)},children:"Reload application"})]}):this.props.children}}]),i}(r.Component)),U=function(e){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h1",{children:"Pixel Puzzles"}),Object(z.jsx)("h4",{children:"Copy each square's pattern to the associated coordinates to reveal a secret image!"}),Object(z.jsxs)("h6",{children:["Fill the grid in your browser or print the puzzle to complete by hand. Edit the puzzle or generate your own using any image. Share puzzles with your friends and family! ",e.showUrl&&Object(z.jsx)(z.Fragment,{children:"https://brandone.github.io/pixel-puzzles/"})]})]})},T=function(e){var t=e.gridSize,i=e.subGridSize,r=e.filledColor,n=e.emptyColor,o=e.solvedColor,a=e.unsolvedColor,s=e.gridData;return e.coordinatesOrder.map((function(e,l){var c=e.x,d=e.y;return Object(z.jsx)("table",{className:"coordinates",children:Object(z.jsxs)("tbody",{children:[Object(z.jsx)("tr",{children:Object(z.jsx)("td",{children:S(c,d)})}),Object(z.jsx)("tr",{children:Object(z.jsx)(G,{isCoordinate:!0,gridSize:t,subGridSize:i,filledColor:r,emptyColor:n,solvedColor:o,unsolvedColor:a,gridY:d,gridX:c,initialSubGridData:s[d][c]})})]})},l)}))},N=function(e){Object(g.a)(i,e);var t=Object(b.a)(i);function i(){return Object(d.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props,t=e.onCellEdit,i=e.onCellChanged,r=e.isAuthoring,n=e.isFilling,o=e.gridSize,a=e.subGridSize,s=e.filledColor,l=e.emptyColor,c=e.solvedColor,d=e.unsolvedColor,u=e.gridData,h=e.coordinatesOrder;return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"grid",children:Object(z.jsx)(I,{onCellEdit:t,onCellChanged:i,isAuthoring:r,isFilling:n,gridSize:o,subGridSize:a,filledColor:s,emptyColor:l,solvedColor:c,unsolvedColor:d,gridData:u})}),!r&&Object(z.jsx)(T,{gridSize:o,subGridSize:a,filledColor:s,emptyColor:l,solvedColor:c,unsolvedColor:d,gridData:u,coordinatesOrder:h})]})})}}]),i}(n.a.Component),B=i(300),Y=i(130),J=i(301),W=i(138),_=function(e){var t=e.changeMode,i=e.clear,r=e.revealSolution,n=e.invert,o=e.importImage,a=e.exportImage,s=e.share,l=e.resizeGrids,c=e.print,d=e.isAuthoring,u=e.isReadOnly,h=e.gridData,g=h.length,b=h[0][0].length;return Object(z.jsxs)(z.Fragment,{children:[d&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(B.a,{children:Object(z.jsxs)(Y.a,{children:[Object(z.jsx)(J.a,{title:"Resize Grid",children:Array(9).fill(0).map((function(e,t){return t+1})).filter((function(e){return e>=2&&e!==g})).map((function(e){return Object(z.jsxs)(W.a.Item,{onSelect:function(){return l(e,b)},children:[e,"x",e]},e)}))}),Object(z.jsx)(J.a,{title:"Resize Sub-Grid",children:Array(9).fill(0).map((function(e,t){return t+1})).filter((function(e){return e>=2&&e!==b})).map((function(e){return Object(z.jsxs)(W.a.Item,{onSelect:function(){return l(g,e)},children:[e,"x",e]},e)}))}),Object(z.jsx)(D.a,{onClick:n,children:"Invert"})]})}),Object(z.jsxs)(B.a,{children:[Object(z.jsx)(A.a.Label,{children:"Import from Image"}),Object(z.jsx)(A.a.Control,{type:"file",name:"files",accept:".bmp, .gif, .jpg, .jpeg, .png, .tiff",onChange:o})]}),Object(z.jsx)(B.a,{children:Object(z.jsx)(Y.a,{children:Object(z.jsx)(D.a,{onClick:a,children:"Export as Image"})})})]}),!d&&!u&&Object(z.jsx)(B.a,{children:Object(z.jsx)(Y.a,{children:Object(z.jsx)(A.a.Group,{className:"mb-3",children:Object(z.jsx)(D.a,{variant:"warning",onClick:r,children:"Reveal Solution"})})})}),!u&&Object(z.jsx)(B.a,{children:Object(z.jsxs)(Y.a,{children:[Object(z.jsx)(D.a,{variant:"danger",onClick:i,children:"Clear"}),Object(z.jsx)(D.a,{variant:"danger",onClick:t,children:d?"Play":"Edit"})]})}),Object(z.jsx)(B.a,{children:Object(z.jsxs)(Y.a,{children:[Object(z.jsx)(D.a,{onClick:c,children:"Print"}),Object(z.jsx)(D.a,{onClick:s,children:"Share"})]})})]})},X=i(134),H=i(135),q=function(){return Object(z.jsx)(B.a,{className:"footer",children:Object(z.jsxs)(Y.a,{children:["Created by ",Object(z.jsx)("a",{href:"https://github.com/BrandonE",target:"_blank",rel:"noreferrer",children:"Brandon Evans"}),". Inspired by ",Object(z.jsx)("a",{href:"https://web.archive.org/web/20111027002447/http://www.tipstricks.com/puzzles.html",target:"_blank",rel:"noreferrer",children:"Pencil Puzzles"})," from ",Object(z.jsx)("a",{href:"https://en.wikipedia.org/wiki/Tips_%26_Tricks_(magazine)",children:"Tips & Tricks Magazine"}),"\xa0 ",Object(z.jsx)("a",{href:"https://github.com/BrandonE/pixel-puzzles",target:"_blank",rel:"noreferrer",children:Object(z.jsx)(X.a,{icon:H.a})})]})})},K=i(136),Q=i.n(K),V=i(137),Z=i.n(V),$=(i(295),function(e){Object(g.a)(i,e);var t=Object(b.a)(i);function i(){var e;return Object(d.a)(this,i),(e=t.call(this)).state={isCropping:!0,crop:{}},e.cropComponentRef=n.a.createRef(),e.onImageLoaded=e.onImageLoaded.bind(Object(h.a)(e)),e.getCroppedImg=e.getCroppedImg.bind(Object(h.a)(e)),e.onCropComplete=e.onCropComplete.bind(Object(h.a)(e)),e.onCropChange=e.onCropChange.bind(Object(h.a)(e)),e.onAspectChange=e.onAspectChange.bind(Object(h.a)(e)),e}return Object(u.a)(i,[{key:"componentDidMount",value:function(){this.onAspectChange(!0)}},{key:"onImageLoaded",value:function(e){this.imageRef=e}},{key:"getCroppedImg",value:function(){var e=Object(c.a)(l.a.mark((function e(t,i,r){var n,o,a,s,c,d=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),o=window.devicePixelRatio,a=t.naturalWidth/t.width,s=t.naturalHeight/t.height,c=n.getContext("2d"),n.width=i.width*o*a,n.height=i.height*o*s,c.setTransform(o,0,0,o,0,0),c.imageSmoothingQuality="high",c.drawImage(t,i.x*a,i.y*s,i.width*a,i.height*s,0,0,i.width*a,i.height*s),e.abrupt("return",new Promise((function(e,t){n.toBlob((function(i){i?(i.name=r,window.URL.revokeObjectURL(d.fileUrl),d.fileUrl=window.URL.createObjectURL(i),e(d.fileUrl)):t(new Error("Canvas is empty"))}),"image/png")})));case 11:case"end":return e.stop()}}),e)})));return function(t,i,r){return e.apply(this,arguments)}}()},{key:"onCropComplete",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=7;break}return this.setState({isCropping:!0}),e.next=4,this.getCroppedImg(this.imageRef,t,"newFile.png");case 4:i=e.sent,this.props.onCropProcessed(i),this.setState({isCropping:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onCropChange",value:function(e,t){this.setState({crop:t})}},{key:"onAspectChange",value:function(e){var t,i,r=this,n=this.props,o=n.width,a=n.height,s=!this.state.crop.aspect;s?o<a?(t=100,i=o/a*100):(i=100,t=a/o*100):(t=100,i=100),this.setState({crop:{unit:"%",width:t,height:i,x:0,y:0,aspect:s?1:void 0}},(function(){e||r.cropComponentRef.current.onMediaLoaded()}))}},{key:"render",value:function(){var e=this,t=this.props.imageSrc,i=this.state,r=i.isCropping,n=i.crop;return Object(z.jsxs)("div",{children:[Object(z.jsx)(F.a,{loading:r,position:"global"}),Object(z.jsx)(Z.a,{children:Object(z.jsx)(Q.a,{src:t,crop:n,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange,ref:this.cropComponentRef})}),Object(z.jsx)(A.a,{children:Object(z.jsx)(A.a.Group,{controlId:"formBasicCheckbox",children:Object(z.jsx)(A.a.Check,{type:"checkbox",label:"Square Aspect Ratio (1:1)",checked:!!n.aspect,onChange:function(){return e.onAspectChange()}})})})]})}}]),i}(n.a.Component)),ee=function(e){Object(g.a)(i,e);var t=Object(b.a)(i);function i(){return Object(d.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props,t=e.gridSize,i=e.subGridSize,r=e.filledColor,n=e.emptyColor,o=e.unsolvedColor,a=e.gridData,s=e.coordinatesOrder;return a?Object(z.jsxs)("div",{className:"print",children:[Object(z.jsx)(U,{showUrl:!0}),a&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:"grid",children:Object(z.jsx)(I,{isPrinting:!0,gridSize:t,subGridSize:i,filledColor:r,emptyColor:n,solvedColor:o,unsolvedColor:o,gridData:a})}),Object(z.jsx)(T,{gridSize:t,subGridSize:i,filledColor:r,emptyColor:n,solvedColor:o,unsolvedColor:o,gridData:a,coordinatesOrder:s})]}),Object(z.jsx)(q,{})]}):Object(z.jsx)(z.Fragment,{})}}]),i}(n.a.Component),te=function(e){e.preventDefault(),e.returnValue=""},ie=function(e){Object(g.a)(i,e);var t=Object(b.a)(i);function i(){var e;return Object(d.a)(this,i),(e=t.call(this)).state={isAuthoring:!1,isReadOnly:!1,isFilling:!1,filledColor:0,emptyColor:4294967295,solvedColor:4294902015,unsolvedColor:2155905279,isLoading:!1},e.printableRef=n.a.createRef(),e.initializeGrid=e.initializeGrid.bind(Object(h.a)(e)),e.onCellEdit=e.onCellEdit.bind(Object(h.a)(e)),e.onCellChanged=e.onCellChanged.bind(Object(h.a)(e)),e.changeMode=e.changeMode.bind(Object(h.a)(e)),e.confirmChangeMode=e.confirmChangeMode.bind(Object(h.a)(e)),e.clear=e.clear.bind(Object(h.a)(e)),e.revealSolution=e.revealSolution.bind(Object(h.a)(e)),e.invert=e.invert.bind(Object(h.a)(e)),e.onCropProcessed=e.onCropProcessed.bind(Object(h.a)(e)),e.importImage=e.importImage.bind(Object(h.a)(e)),e.confirmImportImage=e.confirmImportImage.bind(Object(h.a)(e)),e.exportImage=e.exportImage.bind(Object(h.a)(e)),e.share=e.share.bind(Object(h.a)(e)),e.resizeGrids=e.resizeGrids.bind(Object(h.a)(e)),e.print=e.print.bind(Object(h.a)(e)),e}return Object(u.a)(i,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search),t=Object.fromEntries(e.entries()),i=parseInt(t.gridSize,10),r=parseInt(t.subGridSize,10);(!i||i<2||i>9)&&(i=8),(!r||r<2||r>9)&&(r=5),document.onselectstart=function(){return!1},window.addEventListener("beforeunload",te),this.initializeGrid(i,r,t.gridData);var n="true"===t.isAuthoring;this.setState({isAuthoring:n,isReadOnly:"true"===t.isReadOnly&&!n,gridSize:i,subGridSize:r})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",te)}},{key:"navigate",value:function(e){window.removeEventListener("beforeunload",te),window.location.search=e.toString()}},{key:"initializeGrid",value:function(e,t,i){i||8!==e||5!==t||(i="0000000000000000000000000000000000000000000110011100001001111111111111111111111111111111111111111111111111111111111111111111110000111001111111111111110000000000000001100011100000000000000000000000000000000000000000100011000110111111111111111111111110111111111111111111110001111111111111111111111111111111111111111111111111111111111111111111111111100011110111111111111111011110000000000100001100011000001110011101111011110111111110111101111011110111100000100000000000000000000110000000000000000000000000011000000000000000000001000000000000000000000000011110111101111011110111111100111001111011110111101111111111111111111111111111101110011100111001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111100111001110011100111111111111111111111111111111111111111111111111111111110011100111001110011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111001110011100111001111111111111111111111111111111110111101111011110011111110111111111111111101110000000000100001110011111000000000000000000001000000000000000000000000000010000000000000010011111111011111111111111111111111111111111101111011110111000011100011000110000100000110111110111101111101111111111111111111101101000001000010000000000000000000000010000100000000000000011111111111111111111111111111111111111111111111111111001100011000100000000000000000000000000000000000111100111000110000000000111111111111111111110011100000000000000000000000000000000000000000000000000111111111111111111111110011110111001100000000000000000000000000000000000000"),this.gridData=function(e,t,i){for(var r=[],n=0,o=0;o<e;o++){for(var a=[],s=0;s<e;s++){for(var l=[],c=0;c<t;c++){for(var d=[],u=0;u<t;u++){var h=i?i[n]:"0";d.push("1"===h?1:0),n++}l.push(d)}a.push(l)}r.push(a)}return r}(e,t,i),this.coordinatesOrder=C(e)}},{key:"onCellEdit",value:function(e){this.setState({isFilling:!e})}},{key:"onCellChanged",value:function(e,t,i,r,n){this.gridData[e][t][i][r]=n?1:0}},{key:"changeMode",value:function(){this.state.isAuthoring?this.confirmChangeMode():Object(R.confirmAlert)({title:"Confirmation",message:"Are you sure you want to edit the puzzle? This will undo your progress and reveal the solution!",buttons:[{label:"Yes",onClick:this.confirmChangeMode},{label:"No"}]})}},{key:"confirmChangeMode",value:function(){var e=this.state.isAuthoring,t=new URLSearchParams(window.location.search);t.set("gridData",m(this.gridData)),t.set("isAuthoring",JSON.stringify(!e)),t.delete("isReadOnly"),this.navigate(t)}},{key:"clear",value:function(){var e=this,t=this.state.isAuthoring;Object(R.confirmAlert)({title:"Confirmation",message:"Are you sure you want to clear ".concat(t?"the canvas":"your progress","? This cannot be undone."),buttons:[{label:"Yes",onClick:function(){var i=new URLSearchParams(window.location.search);t?i.set("gridData","0"):i.set("gridData",m(e.gridData)),i.set("isAuthoring",JSON.stringify(t)),e.navigate(i)}},{label:"No"}]})}},{key:"revealSolution",value:function(){var e=this;Object(R.confirmAlert)({title:"Confirmation",message:"Are you sure you want to reveal the solution? This spoils the fun!",buttons:[{label:"Yes",onClick:function(){setTimeout((function(){Object(R.confirmAlert)({title:"Solution",childrenElement:function(){var t=e.state,i=t.gridSize,r=t.subGridSize,n=t.filledColor,o=t.emptyColor,a=t.solvedColor,s=t.unsolvedColor;return e.gridData?Object(z.jsx)(I,{isRevealing:!0,isFilling:!1,gridSize:i,subGridSize:r,filledColor:n,emptyColor:o,solvedColor:a,unsolvedColor:s,gridData:e.gridData}):Object(z.jsx)(z.Fragment,{})},buttons:[{label:"Continue"}]})}),0)}},{label:"No"}]})}},{key:"invert",value:function(){for(var e=m(this.gridData),t="",i=0;i<e.length;i++)t+="1"===e[i]?"0":"1";var r=new URLSearchParams(window.location.search);r.set("gridData",t),this.navigate(r)}},{key:"onCropProcessed",value:function(e){this.setState({croppedImageUrl:e})}},{key:"importImage",value:function(e){var t=this,i=e.target.files[0];e.target.value="",this.setState({isLoading:!0});var r=new FileReader;r.addEventListener("load",Object(c.a)(l.a.mark((function e(){var i,n,o,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.read(r.result);case 2:return i=e.sent,n=i.bitmap,o=n.width,a=n.height,e.next=6,new Promise((function(e,t){i.getBase64(f.a.MIME_PNG,(function(i,r){i?t(i):e(r)}))}));case 6:s=e.sent,t.setState({isLoading:!1}),Object(R.confirmAlert)({title:"Confirmation",message:"Are you sure you want to import this image? Your current canvas will be overwritten.",childrenElement:function(){return Object(z.jsx)($,{imageSrc:s,width:o,height:a,onImageLoaded:t.onImageLoaded,onCropProcessed:t.onCropProcessed})},buttons:[{label:"Import",onClick:function(){return t.confirmImportImage()}},{label:"Cancel"}],closeOnClickOutside:!1});case 9:case"end":return e.stop()}}),e)})))),r.readAsDataURL(i)}},{key:"confirmImportImage",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,i,r,n,o,a,s,c,d,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.croppedImageUrl,this.setState({isLoading:!0}),e.next=4,f.a.read(t);case 4:i=e.sent,r=this.gridData.length,n=this.gridData[0][0].length,o=r*n,a=i.bitmap,s=a.width,c=a.height,d=s>c?s:c,i.background(4294967295).contain(d,d).resize(o,o),(u=new URLSearchParams(window.location.search)).set("gridData",v(i,r,n)),this.navigate(u);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportImage",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,i,r,n,o,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,i=t.filledColor,r=t.emptyColor,n=O(this.gridData,i,r),e.next=4,n.getBufferAsync(f.a.MIME_JPEG);case 4:o=e.sent,a=o.reduce((function(e,t){return e+String.fromCharCode(t)}),""),s=btoa(a),Object(R.confirmAlert)({title:"Image",childrenElement:function(){return Object(z.jsxs)(z.Fragment,{children:['Right-click and "Save Image As" to download the image.',Object(z.jsx)("div",{children:Object(z.jsx)("img",{src:"data:image/jpeg;base64, ".concat(s)})})]})},buttons:[{label:"Continue"}]});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"share",value:function(){var e=window.location,t=e.protocol,i=e.host,r=e.pathname,n=new URLSearchParams(window.location.search);n.set("isAuthoring","false"),n.delete("isReadOnly"),n.set("gridData",m(this.gridData)),navigator.clipboard.writeText("".concat(t,"//").concat(i).concat(r,"?").concat(n.toString())),E.b.success("URL copied to your clipboard!")}},{key:"resizeGrids",value:function(e,t){var i=this;Object(R.confirmAlert)({title:"Confirmation",message:"Are you sure you want to resize? This will clear the canvas.",buttons:[{label:"Yes",onClick:function(){var r=new URLSearchParams(window.location.search);r.set("gridSize",e),r.set("subGridSize",t),r.set("gridData","0"),i.navigate(r)}},{label:"No"}]})}},{key:"print",value:function(){var e=this;this.setState({gridDataToPrint:this.gridData}),Object(R.confirmAlert)({title:"Print",message:"Click this button to print the puzzle. Works best on Google Chrome. ",childrenElement:function(){return Object(z.jsx)(L.a,{trigger:function(){return Object(z.jsx)(D.a,{children:"Print"})},content:function(){return e.printableRef.current}})},buttons:[{label:"Cancel"}]})}},{key:"render",value:function(){var e=this.state,t=e.isAuthoring,i=e.isReadOnly,r=e.isFilling,n=e.gridSize,o=e.subGridSize,a=e.filledColor,s=e.emptyColor,l=e.solvedColor,c=e.unsolvedColor,d=e.isLoading,u=e.gridDataToPrint;e.hasError;return this.gridData?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(E.a,{}),Object(z.jsxs)(M,{onError:function(e){return E.b.error(e.toString())},children:[Object(z.jsxs)("div",{className:"no-print",children:[Object(z.jsx)(F.a,{loading:d,position:"global"}),Object(z.jsx)(U,{}),Object(z.jsx)(N,{onCellEdit:this.onCellEdit,onCellChanged:this.onCellChanged,isAuthoring:t,isFilling:r,gridSize:n,subGridSize:o,filledColor:a,emptyColor:s,solvedColor:l,unsolvedColor:c,gridData:this.gridData,coordinatesOrder:this.coordinatesOrder}),Object(z.jsxs)(A.a,{className:"mainForm",children:[Object(z.jsx)(_,{changeMode:this.changeMode,clear:this.clear,revealSolution:this.revealSolution,invert:this.invert,importImage:this.importImage,exportImage:this.exportImage,share:this.share,resizeGrids:this.resizeGrids,print:this.print,isAuthoring:t,isReadOnly:i,gridData:this.gridData}),Object(z.jsx)(q,{}),Object(z.jsx)(ee,{gridSize:n,subGridSize:o,filledColor:a,emptyColor:s,unsolvedColor:c,gridData:u,coordinatesOrder:this.coordinatesOrder,ref:this.printableRef})]})]}),Object(z.jsx)("div",{className:"print",children:Object(z.jsxs)("h3",{children:["Unsupported operation! To print this puzzle, please click the ",Object(z.jsx)("em",{children:"Print"})," button on the webpage itself"]})})]})]}):Object(z.jsx)(z.Fragment,{})}}]),i}(n.a.Component),re=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,303)).then((function(t){var i=t.getCLS,r=t.getFID,n=t.getFCP,o=t.getLCP,a=t.getTTFB;i(e),r(e),n(e),o(e),a(e)}))};a.a.render(Object(z.jsx)(n.a.StrictMode,{children:Object(z.jsx)(ie,{})}),document.getElementById("root")),re()}},[[296,1,2]]]);
//# sourceMappingURL=main.33311def.chunk.js.map