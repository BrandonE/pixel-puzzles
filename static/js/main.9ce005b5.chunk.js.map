{"version":3,"sources":["images/x.svg","lib/util.js","components/Cell.js","components/SubGrid.js","components/Grid.js","components/ErrorBoundary.js","components/Header.js","components/Coordinates.js","components/Main.js","components/Buttons.js","components/Footer.js","components/Crop.js","components/Print.js","App.js","reportWebVitals.js","index.js"],"names":["serializeGridData","gridData","flat","join","binaryStringToHexStringWithLeftovers","binaryString","hexStringWithLeftovers","i","length","nibble","substring","parseInt","toString","toUpperCase","generateCoordinatesOrder","gridSize","coordinatesOrder","gridY","gridX","push","x","y","arr","j","temp","Math","floor","random","shuffleArray","jimpToSerializedGridData","jimpFile","subGridSize","serializedGridData","bitmap","width","height","gridWidthAndHeight","Error","subGridY","subGridX","Jimp","intToRGBA","getPixelColor","r","g","b","a","gridDataToJimp","filledColor","emptyColor","count","setPixelColor","rgbaToInt","getXLabelValues","game","labelValues","continuousCells","getYLabel","decimalToHex","dec","padStart","getCoordinateLabel","Cell","props","React","useState","isCrossedOut","crossedOut","setCrossedOut","onCellEdit","onCellChanged","cellWidthAndHeight","isFilled","className","style","backgroundColor","undefined","backgroundImage","X","minWidth","minHeight","onPointerDown","e","button","isAuthoring","pointerType","onContextMenu","preventDefault","onCrossOut","isCrossingOut","onMouseEnter","isFilling","buttons","which","SubGrid","isCoordinate","isRevealing","initialSubGridData","subGridData","subGridFilling","subGridDataRow","subGridFillingRow","initialValue","state","setTimeout","setState","bind","isSolved","value","this","JSON","stringify","isPrinting","solvedColor","unsolvedColor","border","touchAction","map","rowIndex","colIndex","Component","Grid","getCellWidthAndHeight","noFloat","vw","match","vwValue","parseFloat","split","fontSize","float","paddingRight","margin","Array","fill","_","verticalAlign","paddingDown","valueIndex","textAlign","ErrorBoundary","hasError","error","onError","Button","variant","type","onClick","window","location","reload","children","Header","href","changeGame","Coordinates","coordinates","index","Main","Buttons","changeMode","clear","revealSolution","invert","importImage","exportImage","share","resizeGrids","print","isReadOnly","gridSizeMin","gridSizeMax","subGridSizeMin","subGridSizeMax","nonogramGridSizeMin","nonogramGridSizeMax","Row","Col","DropdownButton","title","filter","size","Dropdown","Item","onSelect","Form","Label","Control","name","accept","onChange","Group","Footer","target","rel","icon","faGithub","Crop","isCropping","crop","cropComponentRef","createRef","onImageLoaded","getCroppedImg","onCropComplete","onCropChange","onAspectChange","image","imageRef","fileName","canvas","document","createElement","pixelRatio","devicePixelRatio","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","setTransform","imageSmoothingQuality","drawImage","Promise","resolve","reject","toBlob","blob","URL","revokeObjectURL","fileUrl","createObjectURL","croppedImageUrl","onCropProcessed","percentCrop","isInitializing","widthPercentage","heightPercentage","isSquare","aspect","unit","current","onMediaLoaded","imageSrc","loading","position","src","ruleOfThirds","onComplete","ref","controlId","Check","label","checked","Print","preventUnload","returnValue","App","isLoading","printableRef","initializeGrid","confirmChangeGame","confirmChangeMode","confirmImportImage","searchParams","URLSearchParams","search","query","Object","fromEntries","entries","includes","onselectstart","addEventListener","removeEventListener","inputGridData","pow","hexString","leftovers","digit","hexStringWithLeftoversToBinaryString","gridRow","subGridRow","generateGrid","filled","crossed","confirmAlert","message","set","delete","navigate","childrenElement","invertedSerializedGridData","file","files","reader","FileReader","read","result","getBase64","MIME_PNG","err","importedImageSrc","closeOnClickOutside","readAsDataURL","largerDimension","background","contain","resize","getBufferAsync","MIME_JPEG","u8","stringChar","reduce","data","byte","String","fromCharCode","b64Encoded","btoa","protocol","host","pathname","navigator","clipboard","writeText","toast","success","gridDataToPrint","trigger","content","scale","minimumWidthAndHeight","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9ce005b5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/x.f5457199.svg\";","import Jimp from 'jimp/es'\n\n// https://stackoverflow.com/a/10142256/12055600\nconst shuffleArray = arr => {\n  let i = arr.length\n  let j\n  let temp\n\n  if (i === 0) {\n    return arr\n  }\n\n  while (--i) {\n    j = Math.floor(Math.random() * (i + 1))\n    temp = arr[i]\n    arr[i] = arr[j]\n    arr[j] = temp\n  }\n\n  return arr\n}\n\nexport const serializeGridData = gridData => gridData.flat().flat().flat().join('')\n\nexport const binaryStringToHexStringWithLeftovers = binaryString => {\n  let hexStringWithLeftovers = ''\n\n  for (let i = 0; i < binaryString.length; i += 4) {\n    const nibble = binaryString.substring(i, i + 4)\n\n    if (nibble.length === 4) {\n      hexStringWithLeftovers += parseInt(nibble, 2).toString(16).toUpperCase()\n    } else {\n      hexStringWithLeftovers += '_' + nibble\n    }\n  }\n\n  return hexStringWithLeftovers\n}\n\nexport const hexStringWithLeftoversToBinaryString = hexStringWithLeftovers => {\n  const [hexString, leftovers] = hexStringWithLeftovers.split('_')\n\n  return hexString.split('').map(digit => parseInt(digit, 16).toString(2).padStart(4, '0')).join('') + leftovers\n}\n\nexport const generateGrid = (gridSize, subGridSize, serializedGridData) => {\n  const gridData = []\n  let count = 0\n\n  for (let gridY = 0; gridY < gridSize; gridY++) {\n    const gridRow = []\n\n    for (let gridX = 0; gridX < gridSize; gridX++) {\n      const subGridData = []\n\n      for (let subGridY = 0; subGridY < subGridSize; subGridY++) {\n        const subGridRow = []\n\n        for (let subGridX = 0; subGridX < subGridSize; subGridX++) {\n          const value = (serializedGridData) ? serializedGridData[count] : '0'\n          subGridRow.push((value === '1') ? 1 : 0)\n          count++\n        }\n\n        subGridData.push(subGridRow)\n      }\n\n      gridRow.push(subGridData)\n    }\n\n    gridData.push(gridRow)\n  }\n\n  return gridData\n}\n\nexport const generateCoordinatesOrder = gridSize => {\n  const coordinatesOrder = []\n\n  for (let gridY = 0; gridY < gridSize; gridY++) {\n    for (let gridX = 0; gridX < gridSize; gridX++) {\n      coordinatesOrder.push({\n        x: gridX,\n        y: gridY\n      })\n    }\n  }\n\n  return shuffleArray(coordinatesOrder)\n}\n\nexport const jimpToSerializedGridData = (jimpFile, gridSize, subGridSize) => {\n  let serializedGridData = ''\n  const { width, height } = jimpFile.bitmap\n  const gridWidthAndHeight = gridSize * subGridSize\n\n  if (gridWidthAndHeight !== width || gridWidthAndHeight !== height) {\n    // This should never be thrown.\n    throw new Error('Invalid image size.')\n  }\n\n  for (let gridY = 0; gridY < gridSize; gridY++) {\n    for (let gridX = 0; gridX < gridSize; gridX++) {\n      for (let subGridY = 0; subGridY < subGridSize; subGridY++) {\n        for (let subGridX = 0; subGridX < subGridSize; subGridX++) {\n          const x = gridX * subGridSize + subGridX\n          const y = gridY * subGridSize + subGridY\n          const { r, g, b, a } = Jimp.intToRGBA(jimpFile.getPixelColor(x, y))\n          const rgb = r + g + b\n          const value = (rgb >= ((255 + 255 + 255) / 2) || a === 0) ? '0' : '1'\n          serializedGridData += value\n        }\n      }\n    }\n  }\n\n  return serializedGridData\n}\n\nexport const gridDataToJimp = (gridData, filledColor, emptyColor) => {\n  const serializedGridData = serializeGridData(gridData)\n  const gridSize = gridData.length\n  const subGridSize = gridData[0][0].length\n  const gridWidthAndHeight = gridSize * subGridSize\n\n  const jimpFile = new Jimp(gridWidthAndHeight, gridWidthAndHeight)\n  let count = 0\n\n  for (let gridY = 0; gridY < gridSize; gridY++) {\n    for (let gridX = 0; gridX < gridSize; gridX++) {\n      for (let subGridY = 0; subGridY < subGridSize; subGridY++) {\n        for (let subGridX = 0; subGridX < subGridSize; subGridX++) {\n          const x = gridX * subGridSize + subGridX\n          const y = gridY * subGridSize + subGridY\n          const { r, g, b } = Jimp.intToRGBA((serializedGridData[count] === '1') ? filledColor : emptyColor)\n\n          jimpFile.setPixelColor(Jimp.rgbaToInt(r, g, b, 255), x, y)\n\n          count++\n        }\n      }\n    }\n  }\n\n  return jimpFile\n}\n\nexport const getXLabelValues = (x, game, gridData, gridSize) => {\n  if (!game || game === 'classic') {\n    return ['ABCDEFGHIJK'[x]]\n  } else if (game === 'nonogram') {\n    const labelValues = []\n    let continuousCells = 0\n\n    for (let gridY = 0; gridY < gridSize; gridY++) {\n      if (gridData[gridY][x][0][0]) {\n        continuousCells++\n      } else {\n        if (continuousCells) {\n          labelValues.push(continuousCells)\n        }\n\n        continuousCells = 0\n      }\n    }\n\n    if (continuousCells !== 0) {\n      labelValues.push(continuousCells)\n    } else if (labelValues.length === 0) {\n      labelValues.push(0)\n    }\n\n    return labelValues\n  }\n}\n\nexport const getYLabel = (y, game, gridData, gridSize) => {\n  if (!game || game === 'classic') {\n    return y + 1\n  } else if (game === 'nonogram') {\n    const labelValues = []\n    let continuousCells = 0\n\n    for (let gridX = 0; gridX < gridSize; gridX++) {\n      if (gridData[y][gridX][0][0]) {\n        continuousCells++\n      } else {\n        if (continuousCells) {\n          labelValues.push(continuousCells)\n        }\n\n        continuousCells = 0\n      }\n    }\n\n    if (continuousCells !== 0) {\n      labelValues.push(continuousCells)\n    } else if (labelValues.length === 0) {\n      labelValues.push(0)\n    }\n\n    return labelValues.join(',')\n  }\n}\n\nexport const decimalToHex = dec => `#${dec.toString(16).toUpperCase().padStart(6, '0')}`\nexport const getCoordinateLabel = (x, y) => getXLabelValues(x)[0] + getYLabel(y)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport X from '../images/x.svg'\nimport { decimalToHex } from '../lib/util'\n\nconst Cell = props => {\n  const [crossedOut, setCrossedOut] = React.useState({\n    isCrossedOut: false\n  })\n\n  const {\n    onCellEdit, onCellChanged, game, filledColor, emptyColor,\n    gridY, gridX, subGridY, subGridX, cellWidthAndHeight, isFilled\n  } = props\n\n  return (\n    <td\n      className=\"cell\"\n\n      style={{\n        backgroundColor: crossedOut.isCrossedOut ? undefined : decimalToHex((isFilled) ? filledColor : emptyColor),\n        backgroundImage: crossedOut.isCrossedOut ? `url(${X})` : undefined,\n        minWidth: cellWidthAndHeight,\n        minHeight: cellWidthAndHeight,\n        width: cellWidthAndHeight,\n        height: cellWidthAndHeight\n      }}\n\n      onPointerDown={(e) => {\n        // Ignore right-click.\n        if (e.button === 2) {\n          return\n        }\n\n        const { isAuthoring, isFilled } = props\n\n        if (onCellEdit) {\n          onCellEdit(isFilled)\n\n          if (\n            game === 'nonogram' && e.pointerType === 'touch' &&\n              !isAuthoring && isFilled && !crossedOut.isCrossedOut\n          ) {\n            setCrossedOut({ isCrossedOut: isFilled })\n            return\n          }\n        }\n\n        if (onCellChanged) {\n          onCellChanged(gridY, gridX, subGridY, subGridX, !isFilled)\n        }\n\n        setCrossedOut({ isCrossedOut: false })\n      }}\n\n      // Right-click\n      onContextMenu={(e) => {\n        e.preventDefault()\n\n        const { onCrossOut } = props\n\n        if (game !== 'nonogram' || props.isAuthoring || !onCrossOut) {\n          return\n        }\n\n        const isCrossingOut = !crossedOut.isCrossedOut\n\n        onCrossOut(isCrossingOut)\n        setCrossedOut({ isCrossedOut: isCrossingOut })\n        onCellChanged(gridY, gridX, subGridY, subGridX, false)\n      }}\n\n      onMouseEnter={e => {\n        const { isAuthoring, isFilling, isCrossingOut } = props\n\n        if (onCellChanged && e.buttons === undefined ? e.which === 1 : e.buttons === 1) {\n          onCellChanged(gridY, gridX, subGridY, subGridX, isFilling)\n\n          if (isFilling) {\n            setCrossedOut({ isCrossedOut: false })\n          }\n        } else if (game === 'nonogram' && e.buttons === 2 && !isAuthoring) {\n          setCrossedOut({ isCrossedOut: isCrossingOut })\n\n          if (isCrossingOut) {\n            onCellChanged(gridY, gridX, subGridY, subGridX, false)\n          }\n        }\n      }}\n    >\n    </td>\n  )\n}\n\nCell.propTypes = {\n  onCellEdit: PropTypes.func,\n  onCellChanged: PropTypes.func,\n  onCrossOut: PropTypes.func,\n  game: PropTypes.string.isRequired,\n  isAuthoring: PropTypes.bool,\n  isFilling: PropTypes.bool,\n  isCrossingOut: PropTypes.bool,\n  isPrinting: PropTypes.bool,\n  filledColor: PropTypes.number.isRequired,\n  emptyColor: PropTypes.number.isRequired,\n  gridY: PropTypes.number.isRequired,\n  gridX: PropTypes.number.isRequired,\n  subGridY: PropTypes.number.isRequired,\n  subGridX: PropTypes.number.isRequired,\n  cellWidthAndHeight: PropTypes.string.isRequired,\n  isFilled: PropTypes.number.isRequired\n}\n\nexport default Cell\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Cell from './Cell'\nimport { decimalToHex } from '../lib/util'\n\nclass SubGrid extends React.Component {\n  constructor (props) {\n    super()\n    const { isAuthoring, isCoordinate, isRevealing, subGridSize } = props\n    const { initialSubGridData } = props\n\n    const subGridData = []\n    const subGridFilling = []\n\n    for (let subGridY = 0; subGridY < subGridSize; subGridY++) {\n      const subGridDataRow = []\n      const subGridFillingRow = []\n\n      for (let subGridX = 0; subGridX < subGridSize; subGridX++) {\n        if (initialSubGridData) {\n          const initialValue = initialSubGridData[subGridY][subGridX]\n\n          subGridDataRow.push(initialValue)\n\n          if (isAuthoring || isCoordinate) {\n            subGridFillingRow.push(initialValue)\n          } else {\n            subGridFillingRow.push(0)\n          }\n        } else {\n          subGridDataRow.push(0)\n          subGridFillingRow.push(0)\n        }\n      }\n\n      subGridData.push(subGridDataRow)\n      subGridFilling.push(subGridFillingRow)\n    }\n\n    this.state = {\n      subGridData,\n      subGridFilling\n    }\n\n    if (isRevealing) {\n      setTimeout(() => {\n        this.setState({\n          subGridFilling: subGridData\n        })\n      }, Math.random() * 1000)\n    }\n\n    this.onCellChanged = this.onCellChanged.bind(this)\n    this.isSolved = this.isSolved.bind(this)\n  }\n\n  onCellChanged (gridY, gridX, subGridY, subGridX, value) {\n    const { onCellChanged, isAuthoring, isCoordinate } = this.props\n    const { subGridData, subGridFilling } = this.state\n\n    if (!isCoordinate && onCellChanged) {\n      if (isAuthoring) {\n        subGridData[subGridY][subGridX] = (value) ? 1 : 0\n        subGridFilling[subGridY][subGridX] = subGridData[subGridY][subGridX]\n        onCellChanged(gridY, gridX, subGridY, subGridX, value)\n      }\n\n      subGridFilling[subGridY][subGridX] = (value) ? 1 : 0\n    }\n\n    this.setState({\n      subGridData,\n      subGridFilling\n    })\n  }\n\n  isSolved () {\n    const { isAuthoring, isCoordinate } = this.props\n    const { subGridData, subGridFilling } = this.state\n    // TODO: Hide non-printed coordinates when solved. Show Toast notification when all sub-grids are solved.\n    return (!isAuthoring && !isCoordinate && JSON.stringify(subGridData) === JSON.stringify(subGridFilling))\n  }\n\n  render () {\n    const {\n      onCellEdit, onCrossOut, isCoordinate, game, isAuthoring, isFilling, isCrossingOut, isPrinting,\n      filledColor, emptyColor, solvedColor, unsolvedColor,\n      cellWidthAndHeight, gridY, gridX\n    } = this.props\n    const { subGridFilling } = this.state\n\n    return (\n      <td\n        className=\"subGrid\"\n        style={{\n          border: (game === 'classic') ? `1px solid ${decimalToHex(this.isSolved() ? solvedColor : unsolvedColor)}` : undefined,\n          minWidth: cellWidthAndHeight,\n          minHeight: cellWidthAndHeight,\n          touchAction: (isCoordinate) ? 'auto' : 'none'\n        }}\n      >\n        <table>\n          <tbody>\n            {subGridFilling.map((subGridFillingRow, rowIndex) => (\n              <tr key={rowIndex}>\n                {subGridFillingRow.map((isFilled, colIndex) => (\n                  <Cell\n                    key={colIndex}\n                    onCellEdit={onCellEdit}\n                    onCellChanged={this.onCellChanged}\n                    onCrossOut={onCrossOut}\n                    game={game}\n                    isAuthoring={isAuthoring}\n                    isFilling={isFilling}\n                    isCrossingOut={isCrossingOut}\n                    isPrinting={isPrinting}\n                    filledColor={filledColor}\n                    emptyColor={emptyColor}\n                    gridY={gridY}\n                    gridX={gridX}\n                    subGridY={rowIndex}\n                    subGridX={colIndex}\n                    cellWidthAndHeight={cellWidthAndHeight}\n                    isFilled={isFilled}\n                  />\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </td>\n    )\n  }\n}\n\nSubGrid.propTypes = {\n  onCellEdit: PropTypes.func,\n  onCellChanged: PropTypes.func,\n  onCrossOut: PropTypes.func,\n  game: PropTypes.string.isRequired,\n  isAuthoring: PropTypes.bool,\n  isCoordinate: PropTypes.bool,\n  isFilling: PropTypes.bool,\n  isCrossingOut: PropTypes.bool,\n  isRevealing: PropTypes.bool,\n  isPrinting: PropTypes.bool,\n  gridSize: PropTypes.number.isRequired,\n  subGridSize: PropTypes.number.isRequired,\n  filledColor: PropTypes.number.isRequired,\n  emptyColor: PropTypes.number.isRequired,\n  solvedColor: PropTypes.number.isRequired,\n  unsolvedColor: PropTypes.number.isRequired,\n  gridY: PropTypes.number.isRequired,\n  gridX: PropTypes.number.isRequired,\n  cellWidthAndHeight: PropTypes.string.isRequired,\n  initialSubGridData: PropTypes.array\n}\n\nexport default SubGrid\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport SubGrid from './SubGrid'\nimport { getXLabelValues, getYLabel } from '../lib/util'\n\nconst Grid = props => {\n  const {\n    onCellEdit, onCellChanged, onCrossOut, getCellWidthAndHeight, game, isAuthoring, isFilling,\n    isCrossingOut, isRevealing, isPrinting, gridSize, subGridSize, filledColor, emptyColor,\n    solvedColor, unsolvedColor, gridData, noFloat\n  } = props\n\n  const cellWidthAndHeight = getCellWidthAndHeight(isPrinting)\n  const vw = cellWidthAndHeight.match(/[0-9]\\.*[0-9]*vw/)[0]\n  const vwValue = parseFloat(vw.split('vw')[0]) / 2\n  const fontSize = `${vwValue}vw`\n\n  return (\n    <div\n      className=\"grid\"\n      style={{\n        float: (game === 'classic' && !noFloat) ? 'left' : undefined,\n        paddingRight: (game === 'classic') ? '20px' : undefined\n      }}\n    >\n      <table\n        style={{\n          margin: (game === 'nonogram') ? 'auto' : undefined\n        }}\n      >\n        <tbody>\n          {(game === 'classic' || !isAuthoring) && (\n            <tr>\n              <td></td>\n\n              {Array(gridSize).fill().map((_, colIndex) => (\n                  <td\n                    key={colIndex}\n\n                    style={{\n                      fontSize: (game === 'nonogram') ? fontSize : undefined,\n                      verticalAlign: 'bottom',\n                      paddingDown: '5px'\n                    }}\n                  >\n                    {getXLabelValues(colIndex, game, gridData, gridSize).map((value, valueIndex) => (\n                      <span key={valueIndex}>{value}<br /></span>\n                    ))}\n                  </td>\n              ))}\n            </tr>\n          )}\n\n          {Array(gridSize).fill().map((_, rowIndex) => (\n            <tr key={rowIndex}>\n              {(game === 'classic' || !isAuthoring) && (\n                <td\n                  style={{\n                    fontSize: (game === 'nonogram') ? fontSize : undefined,\n                    textAlign: 'right',\n                    paddingRight: '5px'\n                  }}\n                >\n                  {getYLabel(rowIndex, game, gridData, gridSize)}\n                </td>\n              )}\n\n              {Array(gridSize).fill().map((_, colIndex) => (\n                <SubGrid\n                  key={colIndex}\n                  onCellEdit={onCellEdit}\n                  onCellChanged={onCellChanged}\n                  onCrossOut={onCrossOut}\n                  game={game}\n                  isAuthoring={isAuthoring}\n                  isFilling={isFilling}\n                  isCrossingOut={isCrossingOut}\n                  isRevealing={isRevealing}\n                  isPrinting={isPrinting}\n                  gridSize={gridSize}\n                  subGridSize={subGridSize}\n                  filledColor={filledColor}\n                  emptyColor={emptyColor}\n                  solvedColor={solvedColor}\n                  unsolvedColor={unsolvedColor}\n                  gridY={rowIndex}\n                  gridX={colIndex}\n                  cellWidthAndHeight={cellWidthAndHeight}\n                  initialSubGridData={gridData[rowIndex][colIndex]}\n                />\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {!isAuthoring && game === 'nonogram' && (\n        <>\n          <p\n            style={{\n              fontSize,\n              textAlign: 'center'\n            }}\n          ><strong>Grid size: {gridSize}x{gridSize}</strong></p>\n        </>\n      )}\n    </div>\n  )\n}\n\nGrid.propTypes = {\n  onCellEdit: PropTypes.func,\n  onCellChanged: PropTypes.func,\n  onCrossOut: PropTypes.func,\n  getCellWidthAndHeight: PropTypes.func.isRequired,\n  game: PropTypes.string,\n  isAuthoring: PropTypes.bool,\n  isFilling: PropTypes.bool,\n  isCrossingOut: PropTypes.bool,\n  isRevealing: PropTypes.bool,\n  isPrinting: PropTypes.bool,\n  gridSize: PropTypes.number.isRequired,\n  subGridSize: PropTypes.number.isRequired,\n  filledColor: PropTypes.number.isRequired,\n  emptyColor: PropTypes.number.isRequired,\n  solvedColor: PropTypes.number.isRequired,\n  unsolvedColor: PropTypes.number.isRequired,\n  gridData: PropTypes.array.isRequired,\n  noFloat: PropTypes.bool\n}\n\nexport default Grid\n","import React, { Component } from 'react'\nimport { Button } from 'react-bootstrap'\nimport PropTypes from 'prop-types'\n\nclass ErrorBoundary extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  componentDidCatch (error) {\n    this.setState({ hasError: true })\n    this.props.onError(error)\n  }\n\n  render () {\n    if (this.state.hasError) {\n      return (\n        <>\n          <h1>Something went wrong.</h1>\n          <Button variant=\"primary\" type=\"submit\" onClick={() => window.location.reload(false)}>Reload application</Button>\n        </>\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node\n  ]).isRequired,\n  onError: PropTypes.func.isRequired\n}\n\nexport default ErrorBoundary\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst Header = props => (\n  <>\n    {props.game === 'classic' && (\n      <>\n        <h1>Pixel Puzzles - Classic</h1>\n        <h4>Copy each square&apos;s pattern to the associated coordinates to reveal a secret image!</h4>\n      </>\n    )}\n\n    {props.game === 'nonogram' && (\n      <>\n        <h1>Pixel Puzzles - Nonogram</h1>\n        <h4>\n          Solve the {props.isPrinting && <>Nonogram</>} {!props.isPrinting && <a href=\"https://en.wikipedia.org/wiki/Nonogram\">Nonogram</a>} to reveal a secret image!&nbsp;\n\n          {!props.isPrinting && (\n            <a href=\"https://www.youtube.com/watch?v=zisu0Qf4TAI\">Nonogram Tutorial</a>\n          )}\n        </h4>\n      </>\n    )}\n\n    <h6>Fill the grid in your browser or print the puzzle to complete by hand. Edit the puzzle or generate your own using any image. Share puzzles with your friends and family! {props.isPrinting && <>https://brandone.github.io/pixel-puzzles/</>}</h6>\n\n    {!props.isPrinting && (\n      <>\n        {props.changeGame && props.game === 'classic' && (\n          <>\n            <h6><strong>Left-click or touch to fill or unfill a cell</strong></h6>\n            <br />\n            <h4>\n              <a href=\"\" onClick={e => {\n                e.preventDefault()\n                props.changeGame('nonogram')\n              }}>Switch to Nonogram mode</a>\n            </h4>\n          </>\n        )}\n\n        {props.changeGame && props.game === 'nonogram' && (\n          <>\n            <h6><strong>Left-click or touch to fill or unfill a cell. Right-click to cross out or uncross out a cell. On mobile, touching a filled cell will cross it out, and touching a crossed out cell will unfill it</strong></h6>\n            <br />\n            <h4>\n              <a href=\"\" onClick={e => {\n                e.preventDefault()\n                props.changeGame('classic')\n              }}>Switch to Classic mode</a>\n            </h4>\n          </>\n        )}\n      </>\n    )}\n  </>\n)\n\nHeader.propTypes = {\n  changeGame: PropTypes.func,\n  game: PropTypes.string.isRequired,\n  isPrinting: PropTypes.bool\n}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport SubGrid from './SubGrid'\nimport { getCoordinateLabel } from '../lib/util'\n\nconst Coordinates = props => {\n  const {\n    getCellWidthAndHeight, isPrinting, gridSize, subGridSize,\n    filledColor, emptyColor, solvedColor, unsolvedColor, gridData,\n    coordinatesOrder\n  } = props\n\n  const cellWidthAndHeight = getCellWidthAndHeight(isPrinting)\n\n  return (\n    coordinatesOrder.map((coordinates, index) => {\n      const { x, y } = coordinates\n\n      return (\n        <table className=\"coordinates\" key={index}>\n          <tbody>\n            <tr>\n              <td>{getCoordinateLabel(x, y)}</td>\n            </tr>\n            <tr>\n              <SubGrid\n                game=\"classic\"\n                isCoordinate={true}\n                gridSize={gridSize}\n                subGridSize={subGridSize}\n                filledColor={filledColor}\n                emptyColor={emptyColor}\n                solvedColor={solvedColor}\n                unsolvedColor={unsolvedColor}\n                gridY={y}\n                gridX={x}\n                cellWidthAndHeight={cellWidthAndHeight}\n                initialSubGridData={gridData[y][x]}\n              />\n            </tr>\n          </tbody>\n        </table>\n      )\n    })\n  )\n}\n\nCoordinates.propTypes = {\n  getCellWidthAndHeight: PropTypes.func.isRequired,\n  isPrinting: PropTypes.bool,\n  gridSize: PropTypes.number.isRequired,\n  subGridSize: PropTypes.number.isRequired,\n  filledColor: PropTypes.number.isRequired,\n  emptyColor: PropTypes.number.isRequired,\n  solvedColor: PropTypes.number.isRequired,\n  unsolvedColor: PropTypes.number.isRequired,\n  gridData: PropTypes.array.isRequired,\n  coordinatesOrder: PropTypes.array.isRequired\n}\n\nexport default Coordinates\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Grid from './Grid'\nimport Coordinates from './Coordinates'\n\nclass Main extends React.Component {\n  render () {\n    const {\n      onCellEdit, onCellChanged, onCrossOut, getCellWidthAndHeight, game,\n      isAuthoring, isFilling, isCrossingOut, gridSize, subGridSize,\n      filledColor, emptyColor, solvedColor, unsolvedColor, gridData,\n      coordinatesOrder\n    } = this.props\n\n    return (\n      <div>\n        <Grid\n          onCellEdit={onCellEdit}\n          onCellChanged={onCellChanged}\n          onCrossOut={onCrossOut}\n          getCellWidthAndHeight={getCellWidthAndHeight}\n          game={game}\n          isAuthoring={isAuthoring}\n          isFilling={isFilling}\n          isCrossingOut={isCrossingOut}\n          gridSize={gridSize}\n          subGridSize={subGridSize}\n          filledColor={filledColor}\n          emptyColor={emptyColor}\n          solvedColor={solvedColor}\n          unsolvedColor={unsolvedColor}\n          gridData={gridData}\n        />\n\n        {!isAuthoring && game === 'classic' && (\n          <Coordinates\n            getCellWidthAndHeight={getCellWidthAndHeight}\n            gridSize={gridSize}\n            subGridSize={subGridSize}\n            filledColor={filledColor}\n            emptyColor={emptyColor}\n            solvedColor={solvedColor}\n            unsolvedColor={unsolvedColor}\n            gridData={gridData}\n            coordinatesOrder={coordinatesOrder}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nMain.propTypes = {\n  onCellEdit: PropTypes.func,\n  onCellChanged: PropTypes.func,\n  onCrossOut: PropTypes.func,\n  getCellWidthAndHeight: PropTypes.func.isRequired,\n  game: PropTypes.string.isRequired,\n  isAuthoring: PropTypes.bool,\n  isFilling: PropTypes.bool,\n  isCrossingOut: PropTypes.bool,\n  gridSize: PropTypes.number.isRequired,\n  subGridSize: PropTypes.number.isRequired,\n  filledColor: PropTypes.number.isRequired,\n  emptyColor: PropTypes.number.isRequired,\n  solvedColor: PropTypes.number.isRequired,\n  unsolvedColor: PropTypes.number.isRequired,\n  gridData: PropTypes.array.isRequired,\n  coordinatesOrder: PropTypes.array.isRequired\n}\n\nexport default Main\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Row, Col, Button, Form, Dropdown, DropdownButton } from 'react-bootstrap'\n\nconst Buttons = props => {\n  const {\n    game, changeMode, clear, revealSolution, invert, importImage, exportImage,\n    share, resizeGrids, print, isAuthoring, isReadOnly,\n    gridSizeMin, gridSizeMax, subGridSizeMin, subGridSizeMax,\n    nonogramGridSizeMin, nonogramGridSizeMax, gridData\n  } = props\n\n  const gridSize = gridData.length\n  const subGridSize = gridData[0][0].length\n\n  return (\n    <>\n      {isAuthoring && (\n        <>\n          <Row>\n            <Col>\n              <DropdownButton title=\"Resize Grid\">\n                {Array((game === 'classic') ? gridSizeMax : nonogramGridSizeMax).fill(0).map((_, i) => i + 1).filter(\n                  size => size >= ((game === 'classic') ? gridSizeMin : nonogramGridSizeMin) && size !== gridSize\n                ).map(size => (\n                  <Dropdown.Item\n                    key={size}\n                    onSelect={() => resizeGrids(size, subGridSize)}\n                  >\n                    {size}x{size}\n                  </Dropdown.Item>\n                ))}\n              </DropdownButton>\n\n              {game === 'classic' && (\n                <DropdownButton title=\"Resize Sub-Grid\">\n                { /* Sizes allowed are 2-9 */ }\n                {Array(subGridSizeMax).fill(0).map((_, i) => i + 1).filter(\n                  size => size >= subGridSizeMin && size !== subGridSize\n                ).map(size => (\n                  <Dropdown.Item\n                    key={size}\n                    onSelect={() => resizeGrids(gridSize, size)}\n                  >\n                    {size}x{size}\n                  </Dropdown.Item>\n                ))}\n              </DropdownButton>\n              )}\n              <Button onClick={invert}>Invert</Button>\n            </Col>\n          </Row>\n\n          <Row>\n            <Form.Label>Import from Image</Form.Label>\n            <Form.Control\n              type=\"file\" name=\"files\"\n              accept=\".bmp, .gif, .jpg, .jpeg, .png, .tiff\"\n              onChange={importImage}\n            />\n          </Row>\n\n          <Row>\n            <Col>\n              <Button onClick={exportImage}>Export as Image</Button>\n            </Col>\n          </Row>\n        </>\n      )}\n\n      {!isAuthoring && !isReadOnly && (\n        <Row>\n          <Col>\n            <Form.Group className=\"mb-3\">\n              <Button variant=\"warning\" onClick={revealSolution}>Reveal Solution</Button>\n            </Form.Group>\n          </Col>\n        </Row>\n      )}\n\n      {!isReadOnly && (\n        <Row>\n          <Col>\n            <Button variant=\"danger\" onClick={clear}>Clear</Button>\n            <Button variant=\"danger\" onClick={changeMode}>{(isAuthoring) ? 'Play' : 'Edit'}</Button>\n          </Col>\n        </Row>\n      )}\n\n      <Row>\n        <Col>\n          <Button onClick={print}>Print</Button>\n          <Button onClick={share}>Share</Button>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nButtons.propTypes = {\n  game: PropTypes.string.isRequired,\n  changeMode: PropTypes.func.isRequired,\n  clear: PropTypes.func.isRequired,\n  revealSolution: PropTypes.func.isRequired,\n  invert: PropTypes.func.isRequired,\n  importImage: PropTypes.func.isRequired,\n  exportImage: PropTypes.func.isRequired,\n  share: PropTypes.func.isRequired,\n  resizeGrids: PropTypes.func.isRequired,\n  print: PropTypes.func.isRequired,\n  isAuthoring: PropTypes.bool,\n  isReadOnly: PropTypes.bool,\n  gridSizeMin: PropTypes.number.isRequired,\n  gridSizeMax: PropTypes.number.isRequired,\n  subGridSizeMin: PropTypes.number.isRequired,\n  subGridSizeMax: PropTypes.number.isRequired,\n  nonogramGridSizeMin: PropTypes.number.isRequired,\n  nonogramGridSizeMax: PropTypes.number.isRequired,\n  gridData: PropTypes.array.isRequired\n}\n\nexport default Buttons\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Row, Col } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faGithub } from '@fortawesome/free-brands-svg-icons'\n\nconst Footer = props => (\n  <Row className=\"footer\">\n    <Col>\n      Created by <a href=\"https://github.com/BrandonE\" target=\"_blank\" rel=\"noreferrer\">Brandon Evans</a>\n\n      {props.game === 'classic' && (\n        <>\n          .&nbsp;Inspired by <a href=\"https://web.archive.org/web/20111027002447/http://www.tipstricks.com/puzzles.html\" target=\"_blank\" rel=\"noreferrer\">Pencil Puzzles</a> from <a href=\"https://en.wikipedia.org/wiki/Tips_%26_Tricks_(magazine)\">Tips &amp; Tricks Magazine</a>\n        </>\n      )}\n\n      &nbsp; <a href=\"https://github.com/BrandonE/pixel-puzzles\" target=\"_blank\" rel=\"noreferrer\"><FontAwesomeIcon icon={faGithub}></FontAwesomeIcon></a>\n    </Col>\n  </Row>\n)\n\nFooter.propTypes = {\n  game: PropTypes.string.isRequired\n}\n\nexport default Footer\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Form } from 'react-bootstrap'\nimport ReactCrop from 'react-image-crop'\nimport { SpinnerComponent } from 'react-element-spinner'\nimport ScrollArea from 'react-scrollbar'\nimport 'react-image-crop/dist/ReactCrop.css'\n\nclass Crop extends React.Component {\n  constructor () {\n    super()\n\n    this.state = {\n      isCropping: true,\n      crop: {}\n    }\n\n    this.cropComponentRef = React.createRef()\n\n    this.onImageLoaded = this.onImageLoaded.bind(this)\n    this.getCroppedImg = this.getCroppedImg.bind(this)\n    this.onCropComplete = this.onCropComplete.bind(this)\n    this.onCropChange = this.onCropChange.bind(this)\n    this.onAspectChange = this.onAspectChange.bind(this)\n  }\n\n  componentDidMount () {\n    this.onAspectChange(true)\n  }\n\n  onImageLoaded (image) {\n    this.imageRef = image\n  }\n\n  async getCroppedImg (image, crop, fileName) {\n    const canvas = document.createElement('canvas')\n    const pixelRatio = window.devicePixelRatio\n    const scaleX = image.naturalWidth / image.width\n    const scaleY = image.naturalHeight / image.height\n    const ctx = canvas.getContext('2d')\n\n    canvas.width = crop.width * pixelRatio * scaleX\n    canvas.height = crop.height * pixelRatio * scaleY\n\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0)\n    ctx.imageSmoothingQuality = 'high'\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width * scaleX,\n      crop.height * scaleY\n    )\n\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(\n        (blob) => {\n          if (!blob) {\n            reject(new Error('Canvas is empty'))\n            return\n          }\n\n          blob.name = fileName\n          window.URL.revokeObjectURL(this.fileUrl)\n          this.fileUrl = window.URL.createObjectURL(blob)\n          resolve(this.fileUrl)\n        },\n        'image/png'\n      )\n    })\n  }\n\n  async onCropComplete (crop) {\n    if (this.imageRef && crop.width && crop.height) {\n      this.setState({\n        isCropping: true\n      })\n\n      const croppedImageUrl = await this.getCroppedImg(\n        this.imageRef,\n        crop,\n        'newFile.png'\n      )\n\n      this.props.onCropProcessed(croppedImageUrl)\n\n      this.setState({\n        isCropping: false\n      })\n    }\n  }\n\n  onCropChange (crop, percentCrop) {\n    this.setState({ crop: percentCrop })\n  }\n\n  onAspectChange (isInitializing) {\n    const { width, height } = this.props\n    const { crop } = this.state\n    const isSquare = !crop.aspect\n    let widthPercentage, heightPercentage\n\n    if (isSquare) {\n      if (width < height) {\n        widthPercentage = 100\n        heightPercentage = width / height * 100\n      } else {\n        heightPercentage = 100\n        widthPercentage = height / width * 100\n      }\n    } else {\n      widthPercentage = 100\n      heightPercentage = 100\n    }\n\n    this.setState({\n      crop: {\n        unit: '%',\n        width: widthPercentage,\n        height: heightPercentage,\n        x: 0,\n        y: 0,\n        aspect: (isSquare) ? 1 : undefined\n      }\n    }, () => {\n      if (!isInitializing) {\n        this.cropComponentRef.current.onMediaLoaded()\n      }\n    })\n  }\n\n  render () {\n    const { imageSrc } = this.props\n    const { isCropping, crop } = this.state\n\n    return (\n      <div>\n        <SpinnerComponent loading={isCropping} position=\"global\" />\n\n        <ScrollArea>\n          <ReactCrop\n            src={imageSrc}\n            crop={crop}\n            ruleOfThirds\n            onImageLoaded={this.onImageLoaded}\n            onComplete={this.onCropComplete}\n            onChange={this.onCropChange}\n            ref={this.cropComponentRef}\n          />\n        </ScrollArea>\n\n        <Form>\n          <Form.Group controlId=\"formBasicCheckbox\">\n            <Form.Check\n              type=\"checkbox\" label=\"Square Aspect Ratio (1:1)\"\n              checked={!!crop.aspect} onChange={() => this.onAspectChange()}\n            />\n          </Form.Group>\n        </Form>\n      </div>\n    )\n  }\n}\n\nCrop.propTypes = {\n  imageSrc: PropTypes.string.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  onCropProcessed: PropTypes.func.isRequired\n}\n\nexport default Crop\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Header from './Header'\nimport Grid from './Grid'\nimport Coordinates from './Coordinates'\nimport Footer from './Footer'\n\nclass Print extends React.Component {\n  render () {\n    const {\n      getCellWidthAndHeight, game, gridSize, subGridSize, filledColor, emptyColor,\n      // Don't indicate which boxes are empty to begin with; always use unsolved color.\n      unsolvedColor, gridData, coordinatesOrder\n    } = this.props\n\n    if (!gridData) {\n      return <></>\n    }\n\n    return (\n      <div className=\"print\">\n        <Header\n          game={game}\n          isPrinting={true}\n        />\n\n        {gridData && (\n          <>\n            <Grid\n              getCellWidthAndHeight={getCellWidthAndHeight}\n              game={game}\n              isPrinting={true}\n              gridSize={gridSize}\n              subGridSize={subGridSize}\n              filledColor={filledColor}\n              emptyColor={emptyColor}\n              solvedColor={unsolvedColor}\n              unsolvedColor={unsolvedColor}\n              gridData={gridData}\n            />\n\n            {game === 'classic' && (\n              <Coordinates\n                getCellWidthAndHeight={getCellWidthAndHeight}\n                isPrinting={true}\n                gridSize={gridSize}\n                subGridSize={subGridSize}\n                filledColor={filledColor}\n                emptyColor={emptyColor}\n                solvedColor={unsolvedColor}\n                unsolvedColor={unsolvedColor}\n                gridData={gridData}\n                coordinatesOrder={coordinatesOrder}\n              />\n            )}\n          </>\n        )}\n\n        <Footer game={game} />\n      </div>\n    )\n  }\n}\n\nPrint.propTypes = {\n  getCellWidthAndHeight: PropTypes.func.isRequired,\n  game: PropTypes.string.isRequired,\n  gridSize: PropTypes.number.isRequired,\n  subGridSize: PropTypes.number.isRequired,\n  filledColor: PropTypes.number.isRequired,\n  emptyColor: PropTypes.number.isRequired,\n  unsolvedColor: PropTypes.number.isRequired,\n  gridData: PropTypes.array,\n  coordinatesOrder: PropTypes.array.isRequired\n}\n\nexport default Print\n","import React from 'react'\nimport Grid from './components/Grid'\nimport { Form, Button } from 'react-bootstrap'\nimport { confirmAlert } from 'react-confirm-alert'\nimport { toast, ToastContainer } from 'react-toastify'\nimport { SpinnerComponent } from 'react-element-spinner'\nimport ReactToPrint from 'react-to-print'\nimport Jimp from 'jimp/es'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'react-confirm-alert/src/react-confirm-alert.css'\nimport 'react-toastify/dist/ReactToastify.css'\nimport './App.css'\nimport ErrorBoundary from './components/ErrorBoundary'\nimport Header from './components/Header'\nimport Main from './components/Main'\nimport Buttons from './components/Buttons'\nimport Footer from './components/Footer'\nimport Crop from './components/Crop'\nimport {\n  generateGrid, generateCoordinatesOrder, serializeGridData,\n  binaryStringToHexStringWithLeftovers, hexStringWithLeftoversToBinaryString,\n  jimpToSerializedGridData, gridDataToJimp\n} from './lib/util'\nimport Print from './components/Print'\n\nconst inputGridDataGitHub30x30 = '000000000019C27FFFFFFFFFFFFFFFFC39FFFC000638000000000231BFFFFFBFFFFC7FFFFFFFFFFFFFFFFFE3DFFFDE00431839DEF7FBDEF782000018000001800004000001EF7BDFCE7BDEFFFFFFFB9CE700000000000000000000000001E739CFFFFFFFFFFFFFF39CE700000000000000000000000000E739CFFFFFFFFBDEF3FBFFFDC00873E00001000000080013FDFFFFFFFF7BDC38C6106FBDF7FFFFB410800000840007FFFFFFFFFFFFCC62000000003CE3003FFFFCE0000000000007FFFFF3DCC000000000'\nconst inputGridDataGitHub15x15 = '07C03FE0FFE33E6600FC01F803F003E00FC01FC07AE3E207C30F0308_0'\n\nconst gridSizeMin = 2\nconst gridSizeMax = 9\nconst subGridSizeMin = 2\nconst subGridSizeMax = 9\n\nconst nonogramGridSizeMin = 5\nconst nonogramGridSizeMax = 20\n\nconst defaultGridSize = 8\nconst defaultSubGridSize = 5\nconst defaultNonogramGridSize = 15\n\nconst filledColor = 0x00000000\nconst emptyColor = 0xFFFFFFFF\nconst solvedColor = 0xFFFF00FF\nconst unsolvedColor = 0x808080FF\n\nconst preventUnload = e => {\n  // Cancel the event\n  e.preventDefault() // If you prevent default behavior in Mozilla Firefox prompt will always be shown\n  // Chrome requires returnValue to be set\n  e.returnValue = ''\n}\n\nclass App extends React.Component {\n  constructor () {\n    super()\n\n    this.state = {\n      game: 'classic',\n      isAuthoring: false,\n      isReadOnly: false,\n      // TODO: Move this down to Grid to avoid re-rendering coordinates and make things faster.\n      isFilling: false,\n      isCrossingOut: false,\n      isLoading: false,\n      gridSize: undefined,\n      subGridSize: undefined\n    }\n\n    this.printableRef = React.createRef()\n\n    this.initializeGrid = this.initializeGrid.bind(this)\n    this.onCellEdit = this.onCellEdit.bind(this)\n    this.onCellChanged = this.onCellChanged.bind(this)\n    this.onCrossOut = this.onCrossOut.bind(this)\n    this.changeGame = this.changeGame.bind(this)\n    this.confirmChangeGame = this.confirmChangeGame.bind(this)\n    this.changeMode = this.changeMode.bind(this)\n    this.confirmChangeMode = this.confirmChangeMode.bind(this)\n    this.clear = this.clear.bind(this)\n    this.revealSolution = this.revealSolution.bind(this)\n    this.invert = this.invert.bind(this)\n    this.onCropProcessed = this.onCropProcessed.bind(this)\n    this.importImage = this.importImage.bind(this)\n    this.confirmImportImage = this.confirmImportImage.bind(this)\n    this.exportImage = this.exportImage.bind(this)\n    this.share = this.share.bind(this)\n    this.resizeGrids = this.resizeGrids.bind(this)\n    this.getCellWidthAndHeight = this.getCellWidthAndHeight.bind(this)\n    this.print = this.print.bind(this)\n  }\n\n  componentDidMount () {\n    const searchParams = new URLSearchParams(window.location.search)\n    const query = Object.fromEntries(searchParams.entries())\n\n    const game = (['classic', 'nonogram'].includes(query.game)) ? query.game : 'classic'\n\n    let gridSize = parseInt(query.gridSize, 10)\n    let subGridSize = parseInt(query.subGridSize, 10)\n\n    if (game === 'classic') {\n      if (!gridSize || gridSize < gridSizeMin || gridSize > gridSizeMax) {\n        gridSize = defaultGridSize\n      }\n\n      if (!subGridSize || subGridSize < subGridSizeMin || subGridSize > subGridSizeMax) {\n        subGridSize = defaultSubGridSize\n      }\n    } else if (game === 'nonogram') {\n      if (!gridSize || gridSize < nonogramGridSizeMin || gridSize > nonogramGridSizeMax) {\n        gridSize = defaultNonogramGridSize\n      }\n\n      subGridSize = 1\n    }\n\n    document.onselectstart = () => false\n\n    window.addEventListener('beforeunload', preventUnload)\n\n    const { gridData } = query\n\n    this.initializeGrid(game, gridSize, subGridSize, gridData)\n\n    const isAuthoring = (query.isAuthoring === 'true')\n\n    this.setState({\n      game,\n      isAuthoring,\n      isReadOnly: (query.isReadOnly === 'true') && !isAuthoring,\n      gridSize,\n      subGridSize\n    })\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('beforeunload', preventUnload)\n  }\n\n  navigate (searchParams) {\n    window.removeEventListener('beforeunload', preventUnload)\n    window.location.search = searchParams.toString()\n  }\n\n  initializeGrid (game, gridSize, subGridSize, inputGridData) {\n    if (!inputGridData && game === 'classic' && gridSize === defaultGridSize && subGridSize === defaultSubGridSize) {\n      inputGridData = inputGridDataGitHub30x30\n    }\n\n    if (!inputGridData && game === 'nonogram' && gridSize === defaultNonogramGridSize) {\n      inputGridData = inputGridDataGitHub15x15\n    }\n\n    const serializedGridData = (inputGridData.length === Math.pow(gridSize * subGridSize, 2))\n      ? inputGridData\n      : hexStringWithLeftoversToBinaryString(inputGridData)\n\n    this.gridData = generateGrid(gridSize, subGridSize, serializedGridData)\n    this.coordinatesOrder = generateCoordinatesOrder(gridSize)\n  }\n\n  onCellEdit (filled) {\n    this.setState({\n      isFilling: !filled\n    })\n  }\n\n  onCellChanged (gridY, gridX, subGridY, subGridX, value) {\n    this.gridData[gridY][gridX][subGridY][subGridX] = (value) ? 1 : 0\n  }\n\n  onCrossOut (crossed) {\n    this.setState({\n      isCrossingOut: crossed\n    })\n  }\n\n  changeGame (game) {\n    const { isAuthoring } = this.state\n\n    confirmAlert({\n      title: 'Confirmation',\n      message: `Are you sure you want to change the game mode? ${(isAuthoring) ? 'This will clear the canvas and cannot be undone.' : 'This will undo your progress.'}`,\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () => this.confirmChangeGame(game)\n        },\n        {\n          label: 'No'\n        }\n      ]\n    })\n  }\n\n  confirmChangeGame (game) {\n    const searchParams = new URLSearchParams(window.location.search)\n    searchParams.set('game', game)\n    searchParams.delete('gridData')\n    searchParams.delete('gridSize')\n    searchParams.delete('subGridSize')\n    searchParams.delete('isReadOnly')\n    this.navigate(searchParams)\n  }\n\n  changeMode () {\n    const { isAuthoring } = this.state\n\n    if (isAuthoring) {\n      this.confirmChangeMode()\n    } else {\n      confirmAlert({\n        title: 'Confirmation',\n        message: 'Are you sure you want to edit the puzzle? This will undo your progress and reveal the solution!',\n        buttons: [\n          {\n            label: 'Yes',\n            onClick: this.confirmChangeMode\n          },\n          {\n            label: 'No'\n          }\n        ]\n      })\n    }\n  }\n\n  confirmChangeMode () {\n    const { isAuthoring } = this.state\n    const searchParams = new URLSearchParams(window.location.search)\n    searchParams.set('gridData', binaryStringToHexStringWithLeftovers(serializeGridData(this.gridData)))\n    searchParams.set('isAuthoring', JSON.stringify(!isAuthoring))\n    searchParams.delete('isReadOnly')\n    this.navigate(searchParams)\n  }\n\n  clear () {\n    const { isAuthoring } = this.state\n\n    confirmAlert({\n      title: 'Confirmation',\n      message: `Are you sure you want to clear ${isAuthoring ? 'the canvas' : 'your progress'}? This cannot be undone.`,\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () => {\n            const searchParams = new URLSearchParams(window.location.search)\n\n            if (isAuthoring) {\n              // Clear the canvas.\n              searchParams.set('gridData', '0')\n            } else {\n              // Clear your progress, not the grid data (actual puzzle contents).\n              searchParams.set('gridData', binaryStringToHexStringWithLeftovers(serializeGridData(this.gridData)))\n            }\n\n            searchParams.set('isAuthoring', JSON.stringify(isAuthoring))\n            this.navigate(searchParams)\n          }\n        },\n        {\n          label: 'No'\n        }\n      ]\n    })\n  }\n\n  revealSolution () {\n    confirmAlert({\n      title: 'Confirmation',\n      message: 'Are you sure you want to reveal the solution? This spoils the fun!',\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () => {\n            setTimeout(() => {\n              confirmAlert({\n                title: 'Solution',\n                childrenElement: () => {\n                  const { game, gridSize, subGridSize } = this.state\n\n                  if (!this.gridData) {\n                    return <></>\n                  }\n\n                  return (\n                    <Grid\n                      getCellWidthAndHeight={this.getCellWidthAndHeight}\n                      game={game}\n                      isRevealing={true}\n                      isFilling={false}\n                      isCrossingOut={false}\n                      gridSize={gridSize}\n                      subGridSize={subGridSize}\n                      filledColor={filledColor}\n                      emptyColor={emptyColor}\n                      solvedColor={solvedColor}\n                      unsolvedColor={unsolvedColor}\n                      gridData={this.gridData}\n                      noFloat={true}\n                    />\n                  )\n                },\n                buttons: [\n                  {\n                    label: 'Continue'\n                  }\n                ]\n              })\n            }, 0) // Required to make sure the first alert is dismissed before the next is revealed.\n          }\n        },\n        {\n          label: 'No'\n        }\n      ]\n    })\n  }\n\n  invert () {\n    const serializedGridData = serializeGridData(this.gridData)\n    let invertedSerializedGridData = ''\n\n    for (let i = 0; i < serializedGridData.length; i++) {\n      invertedSerializedGridData += (serializedGridData[i] === '1') ? '0' : '1'\n    }\n\n    const searchParams = new URLSearchParams(window.location.search)\n    searchParams.set('gridData', binaryStringToHexStringWithLeftovers(invertedSerializedGridData))\n    this.navigate(searchParams)\n  }\n\n  onCropProcessed (croppedImageUrl) {\n    this.setState({ croppedImageUrl })\n  }\n\n  importImage (e) {\n    const file = e.target.files[0]\n    e.target.value = ''\n\n    this.setState({\n      isLoading: true\n    })\n\n    const reader = new FileReader()\n\n    reader.addEventListener('load', async () => {\n      const jimpFile = await Jimp.read(reader.result)\n      const { width, height } = jimpFile.bitmap\n\n      const importedImageSrc = await new Promise((resolve, reject) => {\n        // Converting to PNG ensures GIFs are processed properly.\n        jimpFile.getBase64(Jimp.MIME_PNG, (err, src) => {\n          if (err) {\n            reject(err)\n          } else {\n            resolve(src)\n          }\n        })\n      })\n\n      this.setState({\n        isLoading: false\n      })\n\n      confirmAlert({\n        title: 'Confirmation',\n        message: 'Are you sure you want to import this image? Your current canvas will be overwritten.',\n        childrenElement: () => <Crop\n          imageSrc={importedImageSrc}\n          width={width}\n          height={height}\n          onImageLoaded={this.onImageLoaded}\n          onCropProcessed={this.onCropProcessed}\n        />,\n        buttons: [\n          {\n            label: 'Import',\n            onClick: () => this.confirmImportImage()\n          },\n          {\n            label: 'Cancel'\n          }\n        ],\n        closeOnClickOutside: false\n      })\n    })\n\n    reader.readAsDataURL(file)\n  }\n\n  async confirmImportImage () {\n    const { croppedImageUrl } = this.state\n\n    this.setState({\n      isLoading: true\n    })\n\n    const jimpFile = await Jimp.read(croppedImageUrl)\n    const gridSize = this.gridData.length\n    const subGridSize = this.gridData[0][0].length\n    const gridWidthAndHeight = gridSize * subGridSize\n\n    const { width, height } = jimpFile.bitmap\n    const largerDimension = (width > height) ? width : height\n\n    jimpFile\n      .background(0xFFFFFFFF)\n      .contain(largerDimension, largerDimension)\n      .resize(gridWidthAndHeight, gridWidthAndHeight)\n\n    const searchParams = new URLSearchParams(window.location.search)\n    searchParams.set('gridData', binaryStringToHexStringWithLeftovers(jimpToSerializedGridData(jimpFile, gridSize, subGridSize)))\n    this.navigate(searchParams)\n  }\n\n  async exportImage () {\n    const image = gridDataToJimp(this.gridData, filledColor, emptyColor)\n    const u8 = await image.getBufferAsync(Jimp.MIME_JPEG)\n\n    // https://medium.com/@koteswar.meesala/convert-array-buffer-to-base64-string-to-display-images-in-angular-7-4c443db242cd\n    const stringChar = u8.reduce((data, byte) => {\n      return data + String.fromCharCode(byte)\n    }, '')\n\n    const b64Encoded = btoa(stringChar)\n\n    confirmAlert({\n      title: 'Image',\n      childrenElement: () => {\n        return (\n          <>\n            Right-click and &quot;Save Image As&quot; to download the image.\n            <div><img src={`data:image/jpeg;base64, ${b64Encoded}`} /></div>\n          </>\n        )\n      },\n      buttons: [\n        {\n          label: 'Continue'\n        }\n      ]\n    })\n  }\n\n  share () {\n    const { protocol, host, pathname } = window.location\n    const searchParams = new URLSearchParams(window.location.search)\n    searchParams.set('isAuthoring', 'false')\n    searchParams.delete('isReadOnly')\n    searchParams.set('gridData', binaryStringToHexStringWithLeftovers(serializeGridData(this.gridData)))\n    navigator.clipboard.writeText(`${protocol}//${host}${pathname}?${searchParams.toString()}`)\n    toast.success('URL copied to your clipboard!')\n  }\n\n  resizeGrids (gridSize, subGridSize) {\n    confirmAlert({\n      title: 'Confirmation',\n      message: 'Are you sure you want to resize? This will clear the canvas.',\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () => {\n            const searchParams = new URLSearchParams(window.location.search)\n            searchParams.set('gridSize', gridSize)\n            searchParams.set('subGridSize', subGridSize)\n            searchParams.set('gridData', '0')\n            this.navigate(searchParams)\n          }\n        },\n        {\n          label: 'No'\n        }\n      ]\n    })\n  }\n\n  print () {\n    this.setState({\n      gridDataToPrint: this.gridData\n    })\n\n    confirmAlert({\n      title: 'Print',\n      message: 'Click this button to print the puzzle. Works best on Google Chrome. ',\n      childrenElement: () => (\n        <ReactToPrint\n          trigger={() => (\n            <Button>Print</Button>\n          )}\n          content={() => this.printableRef.current}\n        />\n      ),\n      buttons: [\n        {\n          label: 'Cancel'\n        }\n      ]\n    })\n  }\n\n  getCellWidthAndHeight (isPrinting) {\n    const { game, gridSize, subGridSize } = this.state\n\n    let scale, minimumWidthAndHeight\n\n    if (game === 'classic') {\n      scale = isPrinting ? 50 : 40\n      minimumWidthAndHeight = '6px'\n    } else if (game === 'nonogram') {\n      scale = isPrinting ? 75 : 40\n      minimumWidthAndHeight = isPrinting ? '10px' : '40px'\n    }\n\n    return (game === 'classic' || isPrinting)\n      ? `max(${scale / (gridSize * subGridSize)}vw, ${minimumWidthAndHeight})`\n      : `min(${scale / (gridSize * subGridSize)}vw, ${minimumWidthAndHeight})`\n  }\n\n  render () {\n    const {\n      game, isAuthoring, isReadOnly, isFilling, isCrossingOut, gridSize, subGridSize,\n      isLoading, gridDataToPrint, hasError\n    } = this.state\n\n    if (hasError) {\n      <h1>An unexpected error has occurred. Please reload this page.</h1>\n    }\n\n    if (!this.gridData) {\n      return <></>\n    }\n\n    return (\n      <>\n        <ToastContainer />\n\n        <ErrorBoundary onError={err => toast.error(err.toString())}>\n          <div className=\"no-print\">\n            <SpinnerComponent loading={isLoading} position=\"global\" />\n\n            <Header\n              changeGame={this.changeGame}\n              game={game}\n            />\n\n            <Main\n              onCellEdit={this.onCellEdit}\n              onCellChanged={this.onCellChanged}\n              onCrossOut={this.onCrossOut}\n              getCellWidthAndHeight={this.getCellWidthAndHeight}\n              game={game}\n              isAuthoring={isAuthoring}\n              isFilling={isFilling}\n              isCrossingOut={isCrossingOut}\n              gridSize={gridSize}\n              subGridSize={subGridSize}\n              filledColor={filledColor}\n              emptyColor={emptyColor}\n              solvedColor={solvedColor}\n              unsolvedColor={unsolvedColor}\n              gridData={this.gridData}\n              coordinatesOrder={this.coordinatesOrder}\n            />\n\n            <Form className=\"mainForm\">\n              <Buttons\n                game={game}\n                changeMode={this.changeMode}\n                clear={this.clear}\n                revealSolution={this.revealSolution}\n                invert={this.invert}\n                importImage={this.importImage}\n                exportImage={this.exportImage}\n                share={this.share}\n                resizeGrids={this.resizeGrids}\n                print={this.print}\n                isAuthoring={isAuthoring}\n                isReadOnly={isReadOnly}\n                gridSizeMin={gridSizeMin}\n                gridSizeMax={gridSizeMax}\n                subGridSizeMin={subGridSizeMin}\n                subGridSizeMax={subGridSizeMax}\n                nonogramGridSizeMin={nonogramGridSizeMin}\n                nonogramGridSizeMax={nonogramGridSizeMax}\n                gridData={this.gridData}\n              />\n\n              <Footer game={game} />\n\n              <Print\n                getCellWidthAndHeight={this.getCellWidthAndHeight}\n                gridSize={gridSize}\n                subGridSize={subGridSize}\n                filledColor={filledColor}\n                emptyColor={emptyColor}\n                unsolvedColor={unsolvedColor}\n                gridData={gridDataToPrint}\n                coordinatesOrder={this.coordinatesOrder}\n                game={game}\n                ref={this.printableRef}\n              />\n            </Form>\n          </div>\n\n          <div className=\"print\">\n            <h3>Unsupported operation! To print this puzzle, please click the <em>Print</em> button on the webpage itself</h3>\n          </div>\n        </ErrorBoundary>\n      </>\n    )\n  }\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}